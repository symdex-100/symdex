# Smithery project configuration for MCP server deployment.
# See https://smithery.ai/docs/build/project-config/smithery-yaml
# Session config: https://smithery.ai/docs/build/session-config (x-from for headers/query)

runtime: "container"

# MCP endpoint path (Streamable HTTP). Smithery Gateway connects to /mcp.
startCommand:
  type: "http"
  configSchema:
    type: "object"
    properties:
      ANTHROPIC_API_KEY:
        type: "string"
        title: "Anthropic API Key"
        description: "Optional. For LLM Cypher generation; omit for rule-only mode."
        x-from:
          header: "x-anthropic-api-key"
      OPENAI_API_KEY:
        type: "string"
        title: "OpenAI API Key"
        description: "Optional. Alternative LLM provider."
        x-from:
          header: "x-openai-api-key"
      SYMDEX_LLM_PROVIDER:
        type: "string"
        title: "LLM Provider"
        description: "One of anthropic, openai, gemini."
        default: "anthropic"
      SYMDEX_CYPHER_FALLBACK_ONLY:
        type: "string"
        title: "Rule-only mode"
        description: "Set to 1 or true to disable LLM (no API key needed)."
        default: "0"
    required: []

build:
  dockerfile: "Dockerfile"
  dockerBuildPath: "."

env:
  NODE_ENV: "production"
