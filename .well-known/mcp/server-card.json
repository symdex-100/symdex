{
  "serverInfo": {
    "name": "Symdex-100",
    "version": "1.2.1"
  },
  "authentication": {
    "required": false,
    "schemes": []
  },
  "tools": [
    {
      "name": "search_codebase",
      "description": "Search the Symdex index for functions matching a natural-language query or Cypher pattern.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "query": { "type": "string" },
          "path": { "type": "string", "default": "." },
          "strategy": { "type": "string", "default": "auto" },
          "max_results": { "type": "integer", "default": 10 }
        }
      }
    },
    {
      "name": "search_by_cypher",
      "description": "Find code segments matching a Cypher-100 pattern directly (no LLM).",
      "inputSchema": {
        "type": "object",
        "properties": {
          "cypher_pattern": { "type": "string" },
          "path": { "type": "string", "default": "." },
          "max_results": { "type": "integer", "default": 10 }
        }
      }
    },
    {
      "name": "index_directory",
      "description": "Index all supported source files in a directory and build a sidecar search index in .symdex/",
      "inputSchema": {
        "type": "object",
        "properties": {
          "path": { "type": "string", "default": "." },
          "force": { "type": "boolean", "default": false }
        }
      }
    },
    {
      "name": "get_index_stats",
      "description": "Return statistics about the Symdex index for a directory (indexed_files, indexed_functions, call_edges).",
      "inputSchema": {
        "type": "object",
        "properties": {
          "path": { "type": "string", "default": "." }
        }
      }
    },
    {
      "name": "get_callers",
      "description": "Find functions that call the given function (call graph). Use to answer 'who calls X?'. Requires index with call edges from index_directory.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "function_name": { "type": "string", "description": "Name of the function to find callers for" },
          "path": { "type": "string", "default": "." },
          "context_lines": { "type": "integer", "description": "Lines of code context per result" }
        },
        "required": [ "function_name" ]
      }
    },
    {
      "name": "get_callees",
      "description": "Find functions called by the given function (call graph). Use to answer 'what does X call?'. Only returns indexed callees.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "function_name": { "type": "string", "description": "Name of the function to find callees for" },
          "path": { "type": "string", "default": "." },
          "file_path": { "type": "string", "description": "Optional source file to disambiguate when function exists in multiple files" },
          "context_lines": { "type": "integer" }
        },
        "required": [ "function_name" ]
      }
    },
    {
      "name": "trace_call_chain",
      "description": "Recursively trace the call graph from a function: direction 'callers' (who calls this, walk up) or 'callees' (what this calls, walk down). Cycles are detected.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "function_name": { "type": "string", "description": "Starting function name" },
          "path": { "type": "string", "default": "." },
          "direction": { "type": "string", "default": "callers", "enum": [ "callers", "callees" ] },
          "max_depth": { "type": "integer", "default": 5 },
          "context_lines": { "type": "integer" }
        },
        "required": [ "function_name" ]
      }
    },
    {
      "name": "health",
      "description": "Check that the Symdex MCP server is running and responsive.",
      "inputSchema": { "type": "object", "properties": {} }
    }
  ],
  "resources": [
    { "uri": "symdex://schema/domains", "description": "Cypher domain codes and descriptions" },
    { "uri": "symdex://schema/actions", "description": "Cypher action codes and descriptions" },
    { "uri": "symdex://schema/patterns", "description": "Cypher pattern codes and descriptions" },
    { "uri": "symdex://schema/full", "description": "Complete Cypher-100 schema" }
  ],
  "prompts": [
    { "name": "find_security_functions", "description": "Find all security-related functions" },
    { "name": "audit_domain", "description": "Audit all functions in a specific domain" },
    { "name": "explore_codebase", "description": "High-level architecture overview via domain stats" }
  ]
}
